#!/usr/bin/env python3# -*- coding: utf-8 -*-'''数据可视化 plot_charts'''import syssys.path.append('/Users/nekosa/code/maocaoStalls/backend/real_estate/models/predictModels')import pandas as pdimport numpy as npimport matplotlib.pyplot as plt from collections import Counterimport seaborn as sns#字体设置import matplotlib.font_managerfonts = sorted([f.name for f in matplotlib.font_manager.fontManager.ttflist])for i in fonts:    print(i)plt.rcParams['font.sans-serif'] = ['Kiwi Maru']from matplotlib.font_manager import _rebuild_rebuild()dataset_csv='houses_data_1.csv'#柱状图-显示各个车站的物件数def most_common_nearest_station():    df = pd.read_csv(dataset_csv)    station_list=list(df['nearest_station'])    most_common=Counter(station_list).most_common()[0:10]    print(most_common)    x_list=[]    y_list=[]    for i in most_common:        x_list.append(str(i[0]))        y_list.append(i[1])        plt.text(i[1], i[0],str(i[1]),fontweight='bold', fontsize = 10)    print(x_list,y_list)    plt.barh(x_list,y_list,tick_label=x_list, align='center')    plt.title('number of houses at each station')    plt.xlabel('station')    plt.ylabel('number')    plt.show()   #直方图-显示各个价格段的物件数def price_houses_number():    df = pd.read_csv(dataset_csv)        #价格段    bins=[0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,20000,30000,df['price'].max()]    price_seg = pd.cut(df['price'],bins=bins,right=True,retbins=False)    print(price_seg)    #每个价格段的物件数    value_counts=pd.value_counts(price_seg).sort_index()    print(value_counts)      value_counts.plot.bar(align ='center')    plt.show()        #方法2: 不等距的直方图    bins=[0,1000,2000,3000,4000,5000,6000,7000,8000,9000,10000,20000,30000,df['price'].max()]    plt.hist(df['price'],bins=bins)    plt.show()        #散点图-土地面积和总价def plot_line_chart():    df=pd.read_csv(dataset_csv)    X=df.iloc[:, 5].values #土地面积    y=df.iloc[:, 4].values #价格    print(X.size,y.size)    print(X.max())        #X_grid = np.arange(min(X), max(X), 0.01)    #X_grid = X_grid.reshape((len(X_grid), 1))    plt.scatter(X, y, color = 'blue')    plt.title('Line Chart')    plt.xlabel('Land Area')    plt.ylabel('Price')    plt.show()    #热力图-各个变量间的相关系数def corr_heapmap():    df = pd.read_csv(dataset_csv)    corr=df.corr()    #corr出现返回值为nan的情况是因为数据的类型不是数值型    #print(corr)    sns.heatmap(corr, square=False, linewidths=.5, annot=True)    #与某一列相关性的排名    print(corr['price'].sort_values(ascending=False))    #画预测结果的图def plot_predict_result(y_test,y_pred,score):    plt.plot(np.arange(len(y_pred)), y_test,'ko-',label='true value')    plt.plot(np.arange(len(y_pred)),y_pred,'ro-',label='predict value')    plt.title('score: %f'%score)    plt.legend()    plt.show()           